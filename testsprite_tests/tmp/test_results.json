[
  {
    "projectId": "77a7ab0d-cfb2-4179-ba01-da15a431f7ab",
    "testId": "e48d4fd9-e75d-4734-9450-4e0f59a61f46",
    "userId": "946884f8-8011-701c-42b7-5eca8f6fc671",
    "title": "TC001-Email/Password Sign-In Success",
    "description": "Verify that users can sign in successfully using valid email and password credentials via Firebase Auth.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n\n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n\n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n\n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n\n        # Open a new page in the browser context\n        page = await context.new_page()\n\n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:5173/\", wait_until=\"commit\", timeout=10000)\n\n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n\n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n\n        # Interact with the page elements to simulate user flow\n        # -> Input valid email and password credentials into the form fields.\n        frame = context.pages[-1]\n        # Input valid email into the username or email field \n        elem = frame.locator('xpath=html/body/div/div/div/section/section/section/div[2]/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('testuser@example.com')\n        frame = context.pages[-1]\n        # Input valid password from environment variable into the password field \n        elem = frame.locator('xpath=html/body/div/div/div/section/section/section/div[2]/form/div[2]/div/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('$env.PASSWORD')\n        frame = context.pages[-1]\n        # Click the sign-in button to submit the form \n        elem = frame.locator('xpath=html/body/div/div/div/section/section/section/div[2]/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000) \n        # -> Input valid email and password credentials using correct input fields and click the sign-in button.\n        frame = context.pages[-1]\n        elem = frame.locator('xpath=html/body/div/div/div/section/section/section/div[2]/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('validuser@example.com')\n        \n\n        frame = context.pages[-1]\n        elem = frame.locator('xpath=html/body/div/div/div/section/section/section/div[2]/form/div[2]/div/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('validPassword123')\n        \n\n        frame = context.pages[-1]\n        elem = frame.locator('xpath=html/body/div/div/div/section/section/section/div[2]/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Try alternative valid credentials or verify the current credentials for correctness.\n        frame = context.pages[-1]\n        elem = frame.locator('xpath=html/body/div/div/div/section/section/section/div[2]/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('participant@example.com')\n        \n\n        frame = context.pages[-1]\n        elem = frame.locator('xpath=html/body/div/div/div/section/section/section/div[2]/form/div[2]/div/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('ParticipantPass1')\n        \n\n        frame = context.pages[-1]\n        elem = frame.locator('xpath=html/body/div/div/div/section/section/section/div[2]/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Check if there is an option to sign in as Admin or try alternative sign-in methods or credentials.\n        frame = context.pages[-1]\n        elem = frame.locator('xpath=html/body/div/div/div/section/section/section[2]/p/span').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Attempt to sign in using the 'Continue with Google' button to verify alternative sign-in method.\n        frame = context.pages[-1]\n        elem = frame.locator('xpath=html/body/div/div/div/section/section/section[3]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input a valid Google account email into the email input field and click 'Next' to proceed with Google sign-in.\n        frame = context.pages[-1]\n        elem = frame.locator('xpath=html/body/div[2]/div/div/div[2]/c-wiz/main/div[2]/div/div/div/form/span/section/div/div/div/div/div/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('validuser@gmail.com')\n        \n\n        frame = context.pages[-1]\n        elem = frame.locator('xpath=html/body/div[2]/div/div/div[2]/c-wiz/main/div[3]/div/div/div/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Authentication Successful! Welcome Admin')).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test case failed: User sign-in via Firebase Auth did not succeed or user was not redirected correctly. Expected successful authentication and redirection to user-specific landing page.\")\n        await asyncio.sleep(5)\n\n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n\nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "User sign-in verification failed due to invalid credentials and Google OAuth sign-in blocked by browser security restrictions. Unable to authenticate user successfully via Firebase Auth.\nBrowser Console Logs:\n[ERROR] Failed to load resource: the server responded with a status of 400 () (at https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyCOzRA9a2sDHtVlX7qnszxrgsRCBLyf5p0:0:0)\n[ERROR] Error signing in FirebaseError: Firebase: Error (auth/user-not-found).\n    at createErrorInternal (http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:3368:41)\n    at _fail (http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:3336:13)\n    at _performFetchWithErrorHandling (http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:3760:13)\n    at async _performSignInRequest (http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:3771:30)\n    at async _signInWithCredential (http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:6629:24)\n    at async authWithEmail (http://localhost:5173/src/pages/SignIn.vue:106:5) (at http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:42671:18)\n[ERROR] Error signing in: FirebaseError: Firebase: Error (auth/user-not-found). (at http://localhost:5173/src/store/auth.ts:116:18)\n[ERROR] Failed to load resource: the server responded with a status of 400 () (at https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyCOzRA9a2sDHtVlX7qnszxrgsRCBLyf5p0:0:0)\n[ERROR] Error signing in FirebaseError: Firebase: Error (auth/user-not-found).\n    at createErrorInternal (http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:3368:41)\n    at _fail (http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:3336:13)\n    at _performFetchWithErrorHandling (http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:3760:13)\n    at async _performSignInRequest (http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:3771:30)\n    at async _signInWithCredential (http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:6629:24)\n    at async authWithEmail (http://localhost:5173/src/pages/SignIn.vue:106:5) (at http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:42671:18)\n[ERROR] Error signing in: FirebaseError: Firebase: Error (auth/user-not-found). (at http://localhost:5173/src/store/auth.ts:116:18)\n[WARNING] [intlify] Not found parent scope. use the global scope. (at http://localhost:5173/node_modules/.vite/deps/vue-i18n.js?v=c9001acd:42:12)\n[WARNING] [2025-12-31T02:40:44.646Z]  @firebase/app: Firebase: Error thrown when writing to IndexedDB. Original error: Failed to execute 'put' on 'IDBObjectStore': [object Array] could not be cloned.. (app/idb-set). (at http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:1790:24)\n[ERROR] Failed to load resource: the server responded with a status of 400 () (at https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyCOzRA9a2sDHtVlX7qnszxrgsRCBLyf5p0:0:0)\n[ERROR] Error signing in FirebaseError: Firebase: Error (auth/user-not-found).\n    at createErrorInternal (http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:3368:41)\n    at _fail (http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:3336:13)\n    at _performFetchWithErrorHandling (http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:3760:13)\n    at async _performSignInRequest (http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:3771:30)\n    at async _signInWithCredential (http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:6629:24)\n    at async authWithEmail (http://localhost:5173/src/pages/SignIn.vue:106:5) (at http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:42671:18)\n[ERROR] Error signing in: FirebaseError: Firebase: Error (auth/user-not-found). (at http://localhost:5173/src/store/auth.ts:116:18)\n[ERROR] Cross-Origin-Opener-Policy policy would block the window.closed call. (at http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:8933:0)\n[ERROR] Cross-Origin-Opener-Policy policy would block the window.closed call. (at http://localhost:5173/node_modules/.vite/deps/@levante-framework_firekit.js?v=62ea7c3a:8933:0)\n[WARNING] [intlify] Not found parent scope. use the global scope. (at http://localhost:5173/node_modules/.vite/deps/vue-i18n.js?v=c9001acd:42:12)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/946884f8-8011-701c-42b7-5eca8f6fc671/1767148989271495//tmp/test_task/result.webm",
    "created": "2025-12-31T02:36:22.871Z",
    "modified": "2025-12-31T02:43:09.408Z"
  }
]
